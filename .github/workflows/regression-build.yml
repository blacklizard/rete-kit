name: Validate

on:
  workflow_call:
  schedule:
    - cron: '0 2 * * *'

jobs:
  build-app:
    runs-on: ubuntu-latest

    strategy:
      fail-fast: false
      max-parallel: 4
      matrix:
        include:
          - stack: angular
            version: 12
          - stack: angular
            version: 13
          - stack: angular
            version: 14
          - stack: angular
            version: 15
          - stack: angular
            version: 16
          - stack: angular
            version: 17
          - stack: react
            version: 16
          - stack: react
            version: 17
          - stack: react
            version: 18
          - stack: vue
            version: 2
          - stack: vue
            version: 3
          - stack: svelte
            version: 3
          - stack: svelte
            version: 4

    steps:
    - name: Set up Node.js
      uses: actions/setup-node@v3
    - name: Install Rete Kit
      run: npm i -g rete-kit
    - name: Test
      run: echo ${{ matrix.stack }} ${{ matrix.version }} && rete-kit -V
